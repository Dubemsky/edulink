{% load static %}
<!-- Direct Messaging Component -->
<div class="direct-messaging-container">
  <!-- Direct Messaging Button -->
  <div class="direct-messaging-button" id="directMessagingButton">
    <i class="bi bi-chat-dots-fill"></i>
    <span class="dm-unread-badge" id="dmUnreadBadge">0</span>
  </div>
  
  <!-- Direct Messaging Panel -->
  <div class="direct-messaging-panel" id="directMessagingPanel">
    <div class="direct-messaging-header">
      <h3>Messages</h3>
      <button class="dm-close-panel-btn" id="dmClosePanelBtn">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
    
    <div class="direct-messaging-tabs">
      <button class="dm-tab-btn active" id="dmPrimaryInboxTab" data-tab="primaryInbox">
        Primary Inbox
        <span class="dm-tab-badge" id="dmPrimaryInboxBadge">0</span>
      </button>
      <button class="dm-tab-btn" id="dmMessageRequestsTab" data-tab="messageRequests">
        Message Requests
        <span class="dm-tab-badge" id="dmMessageRequestsBadge">0</span>
      </button>
    </div>
    
    <div class="direct-messaging-search">
      <i class="bi bi-search"></i>
      <input type="text" id="dmMessageSearch" placeholder="Search messages">
    </div>
    
    <div class="dm-tab-content active" id="dmPrimaryInbox">
      <div class="dm-chat-list" id="dmPrimaryInboxList">
        <!-- Chat items will be added here dynamically -->
        <div class="dm-loading-chats">
          <div class="dm-spinner"></div>
          <p>Loading conversations...</p>
        </div>
      </div>
    </div>
    
    <div class="dm-tab-content" id="dmMessageRequests">
      <div class="dm-chat-list" id="dmMessageRequestsList">
        <!-- Message requests will be added here dynamically -->
        <div class="dm-loading-chats">
          <div class="dm-spinner"></div>
          <p>Loading message requests...</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Chat Windows Container -->
  <div class="dm-chat-windows-container" id="dmChatWindowsContainer">
    <!-- Chat windows will be added here dynamically -->
  </div>
</div>

<!-- Chat Window Template (hidden, will be cloned for each chat) -->
<template id="dmChatWindowTemplate">
  <div class="dm-chat-window" data-chat-id="">
    <div class="dm-chat-header">
      <div class="dm-chat-user-info">
        <img src="" alt="" class="dm-chat-user-img">
        <div class="dm-chat-user-details">
          <h4 class="dm-chat-user-name"></h4>
          <span class="dm-chat-user-role"></span>
        </div>
      </div>
      <div class="dm-chat-actions">
        <button class="dm-minimize-chat-btn">
          <i class="bi bi-dash-lg"></i>
        </button>
        <button class="dm-close-chat-btn">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
    </div>
    
    <div class="dm-chat-messages">
      <!-- Messages will be added here dynamically -->
      <div class="dm-chat-loading">
        <div class="dm-spinner"></div>
      </div>
    </div>
    
    <div class="dm-chat-input-container">
      <textarea class="dm-chat-input" placeholder="Type a message..."></textarea>
      <button class="dm-send-message-btn">
        <i class="bi bi-send-fill"></i>
      </button>
    </div>
  </div>
</template>

<!-- Message Template (hidden, will be cloned for each message) -->
<template id="dmMessageTemplate">
  <div class="dm-message">
    <div class="dm-message-content"></div>
    <div class="dm-message-time"></div>
  </div>
</template>